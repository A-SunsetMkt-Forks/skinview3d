{"version":3,"file":"skinview3d.module.js","sources":["../src/model.js","../src/animation.js","../src/utils.js","../src/viewer.js","../src/orbit_controls.js"],"sourcesContent":["import * as THREE from \"three\";\n\nfunction toFaceVertices(x1, y1, x2, y2, w, h) {\n\treturn [\n\t\tnew THREE.Vector2(x1 / w, 1.0 - y2 / h),\n\t\tnew THREE.Vector2(x2 / w, 1.0 - y2 / h),\n\t\tnew THREE.Vector2(x2 / w, 1.0 - y1 / h),\n\t\tnew THREE.Vector2(x1 / w, 1.0 - y1 / h)\n\t];\n}\n\nfunction toSkinVertices(x1, y1, x2, y2) {\n\treturn toFaceVertices(x1, y1, x2, y2, 64.0, 64.0);\n}\n\nfunction toCapeVertices(x1, y1, x2, y2) {\n\treturn toFaceVertices(x1, y1, x2, y2, 64.0, 32.0);\n}\n\nfunction setVertices(box, top, bottom, left, front, right, back) {\n\tbox.faceVertexUvs[0] = [];\n\tbox.faceVertexUvs[0][0] = [right[3], right[0], right[2]];\n\tbox.faceVertexUvs[0][1] = [right[0], right[1], right[2]];\n\tbox.faceVertexUvs[0][2] = [left[3], left[0], left[2]];\n\tbox.faceVertexUvs[0][3] = [left[0], left[1], left[2]];\n\tbox.faceVertexUvs[0][4] = [top[3], top[0], top[2]];\n\tbox.faceVertexUvs[0][5] = [top[0], top[1], top[2]];\n\tbox.faceVertexUvs[0][6] = [bottom[0], bottom[3], bottom[1]];\n\tbox.faceVertexUvs[0][7] = [bottom[3], bottom[2], bottom[1]];\n\tbox.faceVertexUvs[0][8] = [front[3], front[0], front[2]];\n\tbox.faceVertexUvs[0][9] = [front[0], front[1], front[2]];\n\tbox.faceVertexUvs[0][10] = [back[3], back[0], back[2]];\n\tbox.faceVertexUvs[0][11] = [back[0], back[1], back[2]];\n}\n\nconst esp = 0.002;\n\nclass SkinObject extends THREE.Group {\n\tconstructor(layer1Material, layer2Material) {\n\t\tsuper();\n\n\t\tthis.modelListeners = []; // called when model(slim property) is changed\n\n\t\t// Head\n\t\tthis.head = new THREE.Group();\n\n\t\tlet headBox = new THREE.BoxGeometry(8, 8, 8, 0, 0, 0);\n\t\tsetVertices(headBox,\n\t\t\ttoSkinVertices(8, 0, 16, 8),\n\t\t\ttoSkinVertices(16, 0, 24, 8),\n\t\t\ttoSkinVertices(0, 8, 8, 16),\n\t\t\ttoSkinVertices(8, 8, 16, 16),\n\t\t\ttoSkinVertices(16, 8, 24, 16),\n\t\t\ttoSkinVertices(24, 8, 32, 16)\n\t\t);\n\t\tlet headMesh = new THREE.Mesh(headBox, layer1Material);\n\t\tthis.head.add(headMesh);\n\n\t\tlet head2Box = new THREE.BoxGeometry(9, 9, 9, 0, 0, 0);\n\t\tsetVertices(head2Box,\n\t\t\ttoSkinVertices(40, 0, 48, 8),\n\t\t\ttoSkinVertices(48, 0, 56, 8),\n\t\t\ttoSkinVertices(32, 8, 40, 16),\n\t\t\ttoSkinVertices(40, 8, 48, 16),\n\t\t\ttoSkinVertices(48, 8, 56, 16),\n\t\t\ttoSkinVertices(56, 8, 64, 16)\n\t\t);\n\t\tlet head2Mesh = new THREE.Mesh(head2Box, layer2Material);\n\t\thead2Mesh.renderOrder = -1;\n\t\tthis.head.add(head2Mesh);\n\n\t\tthis.add(this.head);\n\n\n\t\t// Body\n\t\tthis.body = new THREE.Group();\n\n\t\tlet bodyBox = new THREE.BoxGeometry(8, 12, 4, 0, 0, 0);\n\t\tsetVertices(bodyBox,\n\t\t\ttoSkinVertices(20, 16, 28, 20),\n\t\t\ttoSkinVertices(28, 16, 36, 20),\n\t\t\ttoSkinVertices(16, 20, 20, 32),\n\t\t\ttoSkinVertices(20, 20, 28, 32),\n\t\t\ttoSkinVertices(28, 20, 32, 32),\n\t\t\ttoSkinVertices(32, 20, 40, 32)\n\t\t);\n\t\tlet bodyMesh = new THREE.Mesh(bodyBox, layer1Material);\n\t\tthis.body.add(bodyMesh);\n\n\t\tlet body2Box = new THREE.BoxGeometry(9, 13.5, 4.5, 0, 0, 0);\n\t\tsetVertices(body2Box,\n\t\t\ttoSkinVertices(20, 32, 28, 36),\n\t\t\ttoSkinVertices(28, 32, 36, 36),\n\t\t\ttoSkinVertices(16, 36, 20, 48),\n\t\t\ttoSkinVertices(20, 36, 28, 48),\n\t\t\ttoSkinVertices(28, 36, 32, 48),\n\t\t\ttoSkinVertices(32, 36, 40, 48)\n\t\t);\n\t\tlet body2Mesh = new THREE.Mesh(body2Box, layer2Material);\n\t\tthis.body.add(body2Mesh);\n\n\t\tthis.body.position.y = -10;\n\t\tthis.add(this.body);\n\n\n\t\t// Right Arm\n\t\tthis.rightArm = new THREE.Group();\n\t\tlet rightArmPivot = new THREE.Group();\n\n\t\tlet rightArmBox = new THREE.BoxGeometry(1, 1, 1, 0, 0, 0); // w/d/h is model-related\n\t\tlet rightArmMesh = new THREE.Mesh(rightArmBox, layer1Material);\n\t\trightArmPivot.add(rightArmMesh);\n\t\tthis.modelListeners.push(() => {\n\t\t\trightArmMesh.scale.x = (this.slim ? 3 : 4) - esp;\n\t\t\trightArmMesh.scale.y = 12 - esp;\n\t\t\trightArmMesh.scale.z = 4 - esp;\n\t\t\tif (this.slim) {\n\t\t\t\tsetVertices(rightArmBox,\n\t\t\t\t\ttoSkinVertices(44, 16, 47, 20),\n\t\t\t\t\ttoSkinVertices(47, 16, 50, 20),\n\t\t\t\t\ttoSkinVertices(40, 20, 44, 32),\n\t\t\t\t\ttoSkinVertices(44, 20, 47, 32),\n\t\t\t\t\ttoSkinVertices(47, 20, 51, 32),\n\t\t\t\t\ttoSkinVertices(51, 20, 54, 32)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tsetVertices(rightArmBox,\n\t\t\t\t\ttoSkinVertices(44, 16, 48, 20),\n\t\t\t\t\ttoSkinVertices(48, 16, 52, 20),\n\t\t\t\t\ttoSkinVertices(40, 20, 44, 32),\n\t\t\t\t\ttoSkinVertices(44, 20, 48, 32),\n\t\t\t\t\ttoSkinVertices(48, 20, 52, 32),\n\t\t\t\t\ttoSkinVertices(52, 20, 56, 32)\n\t\t\t\t);\n\t\t\t}\n\t\t\trightArmBox.uvsNeedUpdate = true;\n\t\t\trightArmBox.elementsNeedUpdate = true;\n\t\t});\n\n\t\tlet rightArm2Box = new THREE.BoxGeometry(1, 1, 1, 0, 0, 0); // w/d/h is model-related\n\t\tlet rightArm2Mesh = new THREE.Mesh(rightArm2Box, layer2Material);\n\t\trightArm2Mesh.renderOrder = 1;\n\t\trightArmPivot.add(rightArm2Mesh);\n\t\tthis.modelListeners.push(() => {\n\t\t\trightArm2Mesh.scale.x = (this.slim ? 3.375 : 4.5) - esp;\n\t\t\trightArm2Mesh.scale.y = 13.5 - esp;\n\t\t\trightArm2Mesh.scale.z = 4.5 - esp;\n\t\t\tif (this.slim) {\n\t\t\t\tsetVertices(rightArm2Box,\n\t\t\t\t\ttoSkinVertices(44, 32, 47, 36),\n\t\t\t\t\ttoSkinVertices(47, 32, 50, 36),\n\t\t\t\t\ttoSkinVertices(40, 36, 44, 48),\n\t\t\t\t\ttoSkinVertices(44, 36, 47, 48),\n\t\t\t\t\ttoSkinVertices(47, 36, 51, 48),\n\t\t\t\t\ttoSkinVertices(51, 36, 54, 48)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tsetVertices(rightArm2Box,\n\t\t\t\t\ttoSkinVertices(44, 32, 48, 36),\n\t\t\t\t\ttoSkinVertices(48, 32, 52, 36),\n\t\t\t\t\ttoSkinVertices(40, 36, 44, 48),\n\t\t\t\t\ttoSkinVertices(44, 36, 48, 48),\n\t\t\t\t\ttoSkinVertices(48, 36, 52, 48),\n\t\t\t\t\ttoSkinVertices(52, 36, 56, 48)\n\t\t\t\t);\n\t\t\t}\n\t\t\trightArm2Box.uvsNeedUpdate = true;\n\t\t\trightArm2Box.elementsNeedUpdate = true;\n\t\t});\n\n\t\trightArmPivot.position.y = -6;\n\t\tthis.rightArm.add(rightArmPivot);\n\t\tthis.rightArm.position.y = -4;\n\t\tthis.modelListeners.push(() => {\n\t\t\tthis.rightArm.position.x = this.slim ? -5.5 : -6;\n\t\t});\n\t\tthis.add(this.rightArm);\n\n\n\t\t// Left Arm\n\t\tthis.leftArm = new THREE.Group();\n\t\tlet leftArmPivot = new THREE.Group();\n\n\t\tlet leftArmBox = new THREE.BoxGeometry(1, 1, 1, 0, 0, 0); // w/d/h is model-related\n\t\tlet leftArmMesh = new THREE.Mesh(leftArmBox, layer1Material);\n\t\tleftArmPivot.add(leftArmMesh);\n\t\tthis.modelListeners.push(() => {\n\t\t\tleftArmMesh.scale.x = (this.slim ? 3 : 4) - esp;\n\t\t\tleftArmMesh.scale.y = 12 - esp;\n\t\t\tleftArmMesh.scale.z = 4 - esp;\n\t\t\tif (this.slim) {\n\t\t\t\tsetVertices(leftArmBox,\n\t\t\t\t\ttoSkinVertices(36, 48, 39, 52),\n\t\t\t\t\ttoSkinVertices(39, 48, 42, 52),\n\t\t\t\t\ttoSkinVertices(32, 52, 36, 64),\n\t\t\t\t\ttoSkinVertices(36, 52, 39, 64),\n\t\t\t\t\ttoSkinVertices(39, 52, 43, 64),\n\t\t\t\t\ttoSkinVertices(43, 52, 46, 64)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tsetVertices(leftArmBox,\n\t\t\t\t\ttoSkinVertices(36, 48, 40, 52),\n\t\t\t\t\ttoSkinVertices(40, 48, 44, 52),\n\t\t\t\t\ttoSkinVertices(32, 52, 36, 64),\n\t\t\t\t\ttoSkinVertices(36, 52, 40, 64),\n\t\t\t\t\ttoSkinVertices(40, 52, 44, 64),\n\t\t\t\t\ttoSkinVertices(44, 52, 48, 64)\n\t\t\t\t);\n\t\t\t}\n\t\t\tleftArmBox.uvsNeedUpdate = true;\n\t\t\tleftArmBox.elementsNeedUpdate=true;\n\t\t});\n\n\t\tlet leftArm2Box = new THREE.BoxGeometry(1, 1, 1, 0, 0, 0); // w/d/h is model-related\n\t\tlet leftArm2Mesh = new THREE.Mesh(leftArm2Box, layer2Material);\n\t\tleftArm2Mesh.renderOrder = 1;\n\t\tleftArmPivot.add(leftArm2Mesh);\n\t\tthis.modelListeners.push(() => {\n\t\t\tleftArm2Mesh.scale.x = (this.slim ? 3.375 : 4.5) - esp;\n\t\t\tleftArm2Mesh.scale.y = 13.5 - esp;\n\t\t\tleftArm2Mesh.scale.z = 4.5 - esp;\n\t\t\tif (this.slim) {\n\t\t\t\tsetVertices(leftArm2Box,\n\t\t\t\t\ttoSkinVertices(52, 48, 55, 52),\n\t\t\t\t\ttoSkinVertices(55, 48, 58, 52),\n\t\t\t\t\ttoSkinVertices(48, 52, 52, 64),\n\t\t\t\t\ttoSkinVertices(52, 52, 55, 64),\n\t\t\t\t\ttoSkinVertices(55, 52, 59, 64),\n\t\t\t\t\ttoSkinVertices(59, 52, 62, 64)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tsetVertices(leftArm2Box,\n\t\t\t\t\ttoSkinVertices(52, 48, 56, 52),\n\t\t\t\t\ttoSkinVertices(56, 48, 60, 52),\n\t\t\t\t\ttoSkinVertices(48, 52, 52, 64),\n\t\t\t\t\ttoSkinVertices(52, 52, 56, 64),\n\t\t\t\t\ttoSkinVertices(56, 52, 60, 64),\n\t\t\t\t\ttoSkinVertices(60, 52, 64, 64)\n\t\t\t\t);\n\t\t\t}\n\t\t\tleftArm2Box.uvsNeedUpdate = true;\n\t\t\tleftArm2Box.elementsNeedUpdate = true;\n\t\t});\n\n\t\tleftArmPivot.position.y = -6;\n\t\tthis.leftArm.add(leftArmPivot);\n\t\tthis.leftArm.position.y = -4;\n\t\tthis.modelListeners.push(() => {\n\t\t\tthis.leftArm.position.x = this.slim ? 5.5 : 6;\n\t\t});\n\t\tthis.add(this.leftArm);\n\n\n\t\t// Right Leg\n\t\tthis.rightLeg = new THREE.Group();\n\t\tlet rightLegPivot = new THREE.Group();\n\n\t\tlet rightLegBox = new THREE.BoxGeometry(4 - esp, 12 - esp, 4 - esp, 0, 0, 0);\n\t\tsetVertices(rightLegBox,\n\t\t\ttoSkinVertices(4, 16, 8, 20),\n\t\t\ttoSkinVertices(8, 16, 12, 20),\n\t\t\ttoSkinVertices(0, 20, 4, 32),\n\t\t\ttoSkinVertices(4, 20, 8, 32),\n\t\t\ttoSkinVertices(8, 20, 12, 32),\n\t\t\ttoSkinVertices(12, 20, 16, 32)\n\t\t);\n\t\tlet rightLegMesh = new THREE.Mesh(rightLegBox, layer1Material);\n\t\trightLegPivot.add(rightLegMesh);\n\n\t\tlet rightLeg2Box = new THREE.BoxGeometry(4.5 - esp, 13.5 - esp, 4.5 - esp, 0, 0, 0);\n\t\tsetVertices(rightLeg2Box,\n\t\t\ttoSkinVertices(4, 32, 8, 36),\n\t\t\ttoSkinVertices(8, 32, 12, 36),\n\t\t\ttoSkinVertices(0, 36, 4, 48),\n\t\t\ttoSkinVertices(4, 36, 8, 48),\n\t\t\ttoSkinVertices(8, 36, 12, 48),\n\t\t\ttoSkinVertices(12, 36, 16, 48)\n\t\t);\n\t\tlet rightLeg2Mesh = new THREE.Mesh(rightLeg2Box, layer2Material);\n\t\trightLeg2Mesh.renderOrder = 1;\n\t\trightLegPivot.add(rightLeg2Mesh);\n\n\t\trightLegPivot.position.y = -6;\n\t\tthis.rightLeg.add(rightLegPivot);\n\t\tthis.rightLeg.position.y = -16;\n\t\tthis.rightLeg.position.x = -2;\n\t\tthis.add(this.rightLeg);\n\n\t\t// Left Leg\n\t\tthis.leftLeg = new THREE.Group();\n\t\tlet leftLegPivot = new THREE.Group();\n\n\t\tlet leftLegBox = new THREE.BoxGeometry(4 - esp, 12 - esp, 4 - esp, 0, 0, 0);\n\t\tsetVertices(leftLegBox,\n\t\t\ttoSkinVertices(20, 48, 24, 52),\n\t\t\ttoSkinVertices(24, 48, 28, 52),\n\t\t\ttoSkinVertices(16, 52, 20, 64),\n\t\t\ttoSkinVertices(20, 52, 24, 64),\n\t\t\ttoSkinVertices(24, 52, 28, 64),\n\t\t\ttoSkinVertices(28, 52, 32, 64)\n\t\t);\n\t\tlet leftLegMesh = new THREE.Mesh(leftLegBox, layer1Material);\n\t\tleftLegPivot.add(leftLegMesh);\n\n\t\tlet leftLeg2Box = new THREE.BoxGeometry(4.5 - esp, 13.5 - esp, 4.5 - esp, 0, 0, 0);\n\t\tsetVertices(leftLeg2Box,\n\t\t\ttoSkinVertices(4, 48, 8, 52),\n\t\t\ttoSkinVertices(8, 48, 12, 52),\n\t\t\ttoSkinVertices(0, 52, 4, 64),\n\t\t\ttoSkinVertices(4, 52, 8, 64),\n\t\t\ttoSkinVertices(8, 52, 12, 64),\n\t\t\ttoSkinVertices(12, 52, 16, 64)\n\t\t);\n\t\tlet leftLeg2Mesh = new THREE.Mesh(leftLeg2Box, layer2Material);\n\t\tleftLeg2Mesh.renderOrder = 1;\n\t\tleftLegPivot.add(leftLeg2Mesh);\n\n\t\tleftLegPivot.position.y = -6;\n\t\tthis.leftLeg.add(leftLegPivot);\n\t\tthis.leftLeg.position.y = -16;\n\t\tthis.leftLeg.position.x = 2;\n\t\tthis.add(this.leftLeg);\n\n\t\tthis.slim = false;\n\t}\n\n\tget slim() {\n\t\treturn this._slim;\n\t}\n\n\tset slim(value) {\n\t\tif (this._slim !== value) {\n\t\t\tthis._slim = value;\n\t\t\tthis.modelListeners.forEach(listener => listener());\n\t\t}\n\t}\n}\n\nclass CapeObject extends THREE.Group {\n\tconstructor(capeMaterial) {\n\t\tsuper();\n\n\t\t// back = outside\n\t\t// front = inside\n\t\tlet capeBox = new THREE.BoxGeometry(10, 16, 1, 0, 0, 0);\n\t\tsetVertices(capeBox,\n\t\t\ttoCapeVertices(1, 0, 11, 1),\n\t\t\ttoCapeVertices(11, 0, 21, 1),\n\t\t\ttoCapeVertices(11, 1, 12, 17),\n\t\t\ttoCapeVertices(12, 1, 22, 17),\n\t\t\ttoCapeVertices(0, 1, 1, 17),\n\t\t\ttoCapeVertices(1, 1, 11, 17)\n\t\t);\n\t\tthis.cape = new THREE.Mesh(capeBox, capeMaterial);\n\t\tthis.cape.position.y = -8;\n\t\tthis.cape.position.z = -0.5;\n\t\tthis.add(this.cape);\n\t}\n}\n\nclass PlayerObject extends THREE.Group {\n\tconstructor(layer1Material, layer2Material, capeMaterial) {\n\t\tsuper();\n\n\t\tthis.skin = new SkinObject(layer1Material, layer2Material);\n\t\tthis.skin.visible = false;\n\t\tthis.add(this.skin);\n\n\t\tthis.cape = new CapeObject(capeMaterial);\n\t\tthis.cape.position.z = -2;\n\t\tthis.cape.position.y = -4;\n\t\tthis.cape.rotation.x = 25 * Math.PI / 180;\n\t\tthis.cape.visible = false;\n\t\tthis.add(this.cape);\n\t}\n}\n\nexport { SkinObject, CapeObject, PlayerObject };\n","function invokeAnimation(animation, player, time) {\n\tif (animation instanceof CompositeAnimation) {\n\t\tanimation.play(player, time);\n\t} else if (animation instanceof Function) {\n\t\tanimation(player, time);\n\t} else {\n\t\tthrow `Not an animation: ${animation}`;\n\t}\n}\n\nclass AnimationHandle {\n\tconstructor(animation) {\n\t\tthis.animation = animation;\n\t\tthis.paused = this._paused = false;\n\t\tthis.speed = this._speed = 1.0;\n\t\tthis._lastChange = null;\n\t\tthis._lastChangeX = null;\n\t}\n\tplay(player, time) {\n\t\tif (this._lastChange === null) {\n\t\t\tthis._lastChange = time;\n\t\t\tthis._lastChangeX = 0;\n\t\t} else if (this.paused !== this._paused || this.speed !== this._speed) {\n\t\t\tlet dt = time - this._lastChange;\n\t\t\tif (this._paused === false) {\n\t\t\t\tthis._lastChangeX += dt * this._speed;\n\t\t\t}\n\t\t\tthis._paused = this.paused;\n\t\t\tthis._speed = this.speed;\n\t\t\tthis._lastChange = time;\n\t\t}\n\t\tif (this.paused === false) {\n\t\t\tlet dt = time - this._lastChange;\n\t\t\tlet x = this._lastChangeX + this.speed * dt;\n\t\t\tinvokeAnimation(this.animation, player, x);\n\t\t}\n\t}\n\treset(){\n\t\tthis._lastChange = null;\n\t}\n}\n\nclass CompositeAnimation {\n\tconstructor() {\n\t\tthis.handles = new Set();\n\t}\n\tadd(animation) {\n\t\tlet handle = new AnimationHandle(animation);\n\t\thandle.remove = () => this.handles.delete(handle);\n\t\tthis.handles.add(handle);\n\t\treturn handle;\n\t}\n\tplay(player, time) {\n\t\tthis.handles.forEach(handle => handle.play(player, time));\n\t}\n}\n\nlet WalkingAnimation = (player, time) => {\n\tlet skin = player.skin;\n\n\t// Multiply by animation's natural speed\n\ttime *= 8;\n\n\t// Leg swing\n\tskin.leftLeg.rotation.x  = Math.sin(time) * 0.5;\n\tskin.rightLeg.rotation.x = Math.sin(time + Math.PI) * 0.5;\n\n\t// Arm swing\n\tskin.leftArm.rotation.x  = Math.sin(time + Math.PI) * 0.5;\n\tskin.rightArm.rotation.x = Math.sin(time) * 0.5;\n\tlet basicArmRotationZ    = Math.PI * 0.02;\n\tskin.leftArm.rotation.z  = Math.cos(time) * 0.03 + basicArmRotationZ;\n\tskin.rightArm.rotation.z = Math.cos(time + Math.PI) * 0.03 - basicArmRotationZ;\n\n\t// Head shaking with different frequency & amplitude\n\tskin.head.rotation.y = Math.sin(time / 4) * 0.2;\n\tskin.head.rotation.x = Math.sin(time / 5) * 0.1;\n\n\t// Always add an angle for cape around the x axis\n\tlet basicCapeRotationX = Math.PI * 0.06;\n\tplayer.cape.rotation.x = Math.sin(time / 1.5) * 0.06 + basicCapeRotationX;\n};\n\nlet RunningAnimation = (player, time) => {\n\tlet skin = player.skin;\n\n\ttime *= 15;\n\n\t// Leg swing with larger amplitude\n\tskin.leftLeg.rotation.x  = Math.cos(time + Math.PI) * 1.3;\n\tskin.rightLeg.rotation.x = Math.cos(time) * 1.3;\n\n\t// Arm swing\n\tskin.leftArm.rotation.x  = Math.cos(time) * 1.5;\n\tskin.rightArm.rotation.x = Math.cos(time + Math.PI) * 1.5;\n\tlet basicArmRotationZ    = Math.PI * 0.1;\n\tskin.leftArm.rotation.z  = Math.cos(time) * 0.1 + basicArmRotationZ;\n\tskin.rightArm.rotation.z = Math.cos(time + Math.PI) * 0.1 - basicArmRotationZ;\n\n\t// Jumping\n\tplayer.position.y = Math.cos(time * 2);\n\t// Dodging when running\n\tplayer.position.x = Math.cos(time) * 0.15;\n\t// Slightly tilting when running\n\tplayer.rotation.z = Math.cos(time + Math.PI) * 0.01;\n\n\t// Apply higher swing frequency, lower amplitude,\n\t// and greater basic rotation around x axis,\n\t// to cape when running.\n\tlet basicCapeRotationX = Math.PI * 0.3;\n\tplayer.cape.rotation.x = Math.sin(time * 2) * 0.1 + basicCapeRotationX;\n\n\t// What about head shaking?\n\t// You shouldn't glance right and left when running dude :P\n};\n\nlet RotatingAnimation = (player, time) => {\n\tplayer.rotation.y = time;\n};\n\nexport {\n\tCompositeAnimation,\n\tinvokeAnimation,\n\tWalkingAnimation,\n\tRunningAnimation,\n\tRotatingAnimation\n};\n","function copyImage(context, sX, sY, w, h, dX, dY, flipHorizontal) {\n\tlet imgData = context.getImageData(sX, sY, w, h);\n\tif (flipHorizontal) {\n\t\tfor (let y = 0; y < h; y++) {\n\t\t\tfor (let x = 0; x < (w / 2); x++) {\n\t\t\t\tlet index = (x + y * w) * 4;\n\t\t\t\tlet index2 = ((w - x - 1) + y * w) * 4;\n\t\t\t\tlet pA1 = imgData.data[index];\n\t\t\t\tlet pA2 = imgData.data[index + 1];\n\t\t\t\tlet pA3 = imgData.data[index + 2];\n\t\t\t\tlet pA4 = imgData.data[index + 3];\n\n\t\t\t\tlet pB1 = imgData.data[index2];\n\t\t\t\tlet pB2 = imgData.data[index2 + 1];\n\t\t\t\tlet pB3 = imgData.data[index2 + 2];\n\t\t\t\tlet pB4 = imgData.data[index2 + 3];\n\n\t\t\t\timgData.data[index] = pB1;\n\t\t\t\timgData.data[index + 1] = pB2;\n\t\t\t\timgData.data[index + 2] = pB3;\n\t\t\t\timgData.data[index + 3] = pB4;\n\n\t\t\t\timgData.data[index2] = pA1;\n\t\t\t\timgData.data[index2 + 1] = pA2;\n\t\t\t\timgData.data[index2 + 2] = pA3;\n\t\t\t\timgData.data[index2 + 3] = pA4;\n\t\t\t}\n\t\t}\n\t}\n\tcontext.putImageData(imgData, dX, dY);\n}\n\nfunction hasTransparency(context, x0, y0, w, h) {\n\tlet imgData = context.getImageData(x0, y0, w, h);\n\tfor (let x = 0; x < w; x++) {\n\t\tfor (let y = 0; y < h; y++) {\n\t\t\tlet offset = (x + y * w) * 4;\n\t\t\tif (imgData.data[offset + 3] !== 0xff) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction computeSkinScale(width) {\n\treturn width / 64.0;\n}\n\nfunction fixOpaqueSkin(context, width) {\n\t// Some ancient skins don't have transparent pixels (nor have helm).\n\t// We have to make the helm area transparent, otherwise it will be rendered as black.\n\tif (!hasTransparency(context, 0, 0, width, width / 2)) {\n\t\tlet scale = computeSkinScale(width);\n\t\tlet clearArea = (x, y, w, h) => context.clearRect(x * scale, y * scale, w * scale, h * scale);\n\t\tclearArea(40, 0, 8, 8); // Helm Top\n\t\tclearArea(48, 0, 8, 8); // Helm Bottom\n\t\tclearArea(32, 8, 8, 8); // Helm Right\n\t\tclearArea(40, 8, 8, 8); // Helm Front\n\t\tclearArea(48, 8, 8, 8); // Helm Left\n\t\tclearArea(56, 8, 8, 8); // Helm Back\n\t}\n}\n\nfunction convertSkinTo1_8(context, width) {\n\tlet scale = computeSkinScale(width);\n\tlet copySkin = (sX, sY, w, h, dX, dY, flipHorizontal) => copyImage(context, sX * scale, sY * scale, w * scale, h * scale, dX * scale, dY * scale, flipHorizontal);\n\n\tfixOpaqueSkin(context, width);\n\n\tcopySkin(4, 16, 4, 4, 20, 48, true); // Top Leg\n\tcopySkin(8, 16, 4, 4, 24, 48, true); // Bottom Leg\n\tcopySkin(0, 20, 4, 12, 24, 52, true); // Outer Leg\n\tcopySkin(4, 20, 4, 12, 20, 52, true); // Front Leg\n\tcopySkin(8, 20, 4, 12, 16, 52, true); // Inner Leg\n\tcopySkin(12, 20, 4, 12, 28, 52, true); // Back Leg\n\tcopySkin(44, 16, 4, 4, 36, 48, true); // Top Arm\n\tcopySkin(48, 16, 4, 4, 40, 48, true); // Bottom Arm\n\tcopySkin(40, 20, 4, 12, 40, 52, true); // Outer Arm\n\tcopySkin(44, 20, 4, 12, 36, 52, true); // Front Arm\n\tcopySkin(48, 20, 4, 12, 32, 52, true); // Inner Arm\n\tcopySkin(52, 20, 4, 12, 44, 52, true); // Back Arm\n}\n\nfunction loadSkinToCanvas(canvas, image) {\n\tlet isOldFormat = false;\n\tif (image.width !== image.height) {\n\t\tif (image.width === 2 * image.height) {\n\t\t\tisOldFormat = true;\n\t\t} else {\n\t\t\tthrow `Bad skin size: ${image.width}x${image.height}`;\n\t\t}\n\t}\n\n\tlet context = canvas.getContext(\"2d\");\n\tif (isOldFormat) {\n\t\tlet sideLength = image.width;\n\t\tcanvas.width = sideLength;\n\t\tcanvas.height = sideLength;\n\t\tcontext.clearRect(0, 0, sideLength, sideLength);\n\t\tcontext.drawImage(image, 0, 0, sideLength, sideLength / 2.0);\n\t\tconvertSkinTo1_8(context, sideLength);\n\t} else {\n\t\tcanvas.width = image.width;\n\t\tcanvas.height = image.height;\n\t\tcontext.clearRect(0, 0, image.width, image.height);\n\t\tcontext.drawImage(image, 0, 0, canvas.width, canvas.height);\n\t}\n}\n\nfunction loadCapeToCanvas(canvas, image) {\n\tlet isOldFormat = false;\n\tif (image.width !== 2 * image.height) {\n\t\tif (image.width * 17 == image.height * 22) {\n\t\t\t// width/height = 22/17\n\t\t\tisOldFormat = true;\n\t\t} else {\n\t\t\tthrow `Bad cape size: ${image.width}x${image.height}`;\n\t\t}\n\t}\n\n\tlet context = canvas.getContext(\"2d\");\n\tif (isOldFormat) {\n\t\tlet width = image.width * 64 / 22;\n\t\tcanvas.width = width;\n\t\tcanvas.height = width / 2;\n\t} else {\n\t\tcanvas.width = image.width;\n\t\tcanvas.height = image.height;\n\t}\n\tcontext.clearRect(0, 0, canvas.width, canvas.height);\n\tcontext.drawImage(image, 0, 0, image.width, image.height);\n}\n\nfunction isSlimSkin(canvasOrImage) {\n\t// Detects whether the skin is default or slim.\n\t//\n\t// The right arm area of *default* skins:\n\t// (44,16)->*-------*-------*\n\t// (40,20)  |top    |bottom |\n\t// \\|/      |4x4    |4x4    |\n\t//  *-------*-------*-------*-------*\n\t//  |right  |front  |left   |back   |\n\t//  |4x12   |4x12   |4x12   |4x12   |\n\t//  *-------*-------*-------*-------*\n\t// The right arm area of *slim* skins:\n\t// (44,16)->*------*------*-*\n\t// (40,20)  |top   |bottom| |<----[x0=50,y0=16,w=2,h=4]\n\t// \\|/      |3x4   |3x4   | |\n\t//  *-------*------*------***-----*-*\n\t//  |right  |front |left   |back  | |<----[x0=54,y0=20,w=2,h=12]\n\t//  |4x12   |3x12  |4x12   |3x12  | |\n\t//  *-------*------*-------*------*-*\n\t// Compared with default right arms, slim right arms have 2 unused areas.\n\t//\n\t// The same is true for left arm:\n\t// The left arm area of *default* skins:\n\t// (36,48)->*-------*-------*\n\t// (32,52)  |top    |bottom |\n\t// \\|/      |4x4    |4x4    |\n\t//  *-------*-------*-------*-------*\n\t//  |right  |front  |left   |back   |\n\t//  |4x12   |4x12   |4x12   |4x12   |\n\t//  *-------*-------*-------*-------*\n\t// The left arm area of *slim* skins:\n\t// (36,48)->*------*------*-*\n\t// (32,52)  |top   |bottom| |<----[x0=42,y0=48,w=2,h=4]\n\t// \\|/      |3x4   |3x4   | |\n\t//  *-------*------*------***-----*-*\n\t//  |right  |front |left   |back  | |<----[x0=46,y0=52,w=2,h=12]\n\t//  |4x12   |3x12  |4x12   |3x12  | |\n\t//  *-------*------*-------*------*-*\n\t//\n\t// If there is a transparent pixel in any of the 4 unused areas, the skin must be slim,\n\t// as transparent pixels are not allowed in the first layer.\n\n\tif (canvasOrImage instanceof HTMLCanvasElement) {\n\t\tlet canvas = canvasOrImage;\n\t\tlet scale = computeSkinScale(canvas.width);\n\t\tlet context = canvas.getContext(\"2d\");\n\t\tlet checkArea = (x, y, w, h) => hasTransparency(context, x * scale, y * scale, w * scale, h * scale);\n\t\treturn checkArea(50, 16, 2, 4) ||\n\t\t\tcheckArea(54, 20, 2, 12) ||\n\t\t\tcheckArea(42, 48, 2, 4) ||\n\t\t\tcheckArea(46, 52, 2, 12);\n\t} else if (canvasOrImage instanceof HTMLImageElement) {\n\t\tlet image = canvasOrImage;\n\t\tlet canvas = document.createElement(\"canvas\");\n\t\tloadSkinToCanvas(canvas, image);\n\t\treturn isSlimSkin(canvas);\n\t} else {\n\t\tthrow `Illegal argument: ${canvasOrImage}`;\n\t}\n}\n\nexport { isSlimSkin, loadSkinToCanvas, loadCapeToCanvas };\n","import * as THREE from \"three\";\nimport { PlayerObject } from \"./model\";\nimport { invokeAnimation } from \"./animation\";\nimport { loadSkinToCanvas,loadCapeToCanvas, isSlimSkin } from \"./utils\";\n\nclass SkinViewer {\n\tconstructor(options) {\n\t\tthis.domElement = options.domElement;\n\t\tthis.animation = options.animation || null;\n\t\tthis.detectModel = options.detectModel !== false; // true by default\n\t\tthis.animationPaused = false;\n\t\tthis.animationTime = 0;\n\t\tthis.disposed = false;\n\n\t\t// texture\n\t\tthis.skinImg = new Image();\n\t\tthis.skinCanvas = document.createElement(\"canvas\");\n\t\tthis.skinTexture = new THREE.Texture(this.skinCanvas);\n\t\tthis.skinTexture.magFilter = THREE.NearestFilter;\n\t\tthis.skinTexture.minFilter = THREE.NearestFilter;\n\n\t\tthis.capeImg = new Image();\n\t\tthis.capeCanvas = document.createElement(\"canvas\");\n\t\tthis.capeTexture = new THREE.Texture(this.capeCanvas);\n\t\tthis.capeTexture.magFilter = THREE.NearestFilter;\n\t\tthis.capeTexture.minFilter = THREE.NearestFilter;\n\n\t\tthis.layer1Material = new THREE.MeshBasicMaterial({ map: this.skinTexture, side: THREE.FrontSide });\n\t\tthis.layer2Material = new THREE.MeshBasicMaterial({ map: this.skinTexture, transparent: true, opacity: 1, side: THREE.DoubleSide, alphaTest: 0.5 });\n\t\tthis.capeMaterial = new THREE.MeshBasicMaterial({ map: this.capeTexture, transparent: true, opacity: 1, side: THREE.DoubleSide, alphaTest: 0.5 });\n\n\t\t// scene\n\t\tthis.scene = new THREE.Scene();\n\n\t\t// Use smaller fov to avoid distortion\n\t\tthis.camera = new THREE.PerspectiveCamera(40);\n\t\tthis.camera.position.y = -12;\n\t\tthis.camera.position.z = 60;\n\n\t\tthis.renderer = new THREE.WebGLRenderer({ angleRot: true, alpha: true, antialias: false });\n\t\tthis.renderer.setSize(300, 300); // default size\n\t\tthis.renderer.context.getShaderInfoLog = () => \"\"; // shut firefox up\n\t\tthis.domElement.appendChild(this.renderer.domElement);\n\n\t\tthis.playerObject = new PlayerObject(this.layer1Material, this.layer2Material, this.capeMaterial);\n\t\tthis.scene.add(this.playerObject);\n\n\t\t// texture loading\n\t\tthis.skinImg.crossOrigin = \"anonymous\";\n\t\tthis.skinImg.onerror = () => console.error(\"Failed loading \" + this.skinImg.src);\n\t\tthis.skinImg.onload = () => {\n\t\t\tloadSkinToCanvas(this.skinCanvas, this.skinImg);\n\n\t\t\tif (this.detectModel) {\n\t\t\t\tthis.playerObject.skin.slim = isSlimSkin(this.skinCanvas);\n\t\t\t}\n\n\t\t\tthis.skinTexture.needsUpdate = true;\n\t\t\tthis.layer1Material.needsUpdate = true;\n\t\t\tthis.layer2Material.needsUpdate = true;\n\n\t\t\tthis.playerObject.skin.visible = true;\n\t\t};\n\n\t\tthis.capeImg.crossOrigin = \"anonymous\";\n\t\tthis.capeImg.onerror = () => console.error(\"Failed loading \" + this.capeImg.src);\n\t\tthis.capeImg.onload = () => {\n\t\t\tloadCapeToCanvas(this.capeCanvas, this.capeImg);\n\n\t\t\tthis.capeTexture.needsUpdate = true;\n\t\t\tthis.capeMaterial.needsUpdate = true;\n\n\t\t\tthis.playerObject.cape.visible = true;\n\t\t};\n\n\t\tif (options.skinUrl) this.skinUrl = options.skinUrl;\n\t\tif (options.capeUrl) this.capeUrl = options.capeUrl;\n\t\tif (options.width) this.width = options.width;\n\t\tif (options.height) this.height = options.height;\n\n\t\tlet draw = () => {\n\t\t\tif (this.disposed) return;\n\t\t\twindow.requestAnimationFrame(draw);\n\t\t\tif (!this.animationPaused) {\n\t\t\t\tthis.animationTime++;\n\t\t\t\tif (this.animation) {\n\t\t\t\t\tinvokeAnimation(this.animation, this.playerObject, this.animationTime / 100.0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.renderer.render(this.scene, this.camera);\n\t\t};\n\t\tdraw();\n\t}\n\n\tsetSize(width, height) {\n\t\tthis.camera.aspect = width / height;\n\t\tthis.camera.updateProjectionMatrix();\n\t\tthis.renderer.setSize(width, height);\n\t}\n\n\tdispose() {\n\t\tthis.disposed = true;\n\t\tthis.domElement.removeChild(this.renderer.domElement);\n\t\tthis.renderer.dispose();\n\t\tthis.skinTexture.dispose();\n\t\tthis.capeTexture.dispose();\n\t}\n\n\tget skinUrl() {\n\t\treturn this.skinImg.src;\n\t}\n\n\tset skinUrl(url) {\n\t\tthis.skinImg.src = url;\n\t}\n\n\tget capeUrl() {\n\t\treturn this.capeImg.src;\n\t}\n\n\tset capeUrl(url) {\n\t\tthis.capeImg.src = url;\n\t}\n\n\tget width() {\n\t\treturn this.renderer.getSize().width;\n\t}\n\n\tset width(newWidth) {\n\t\tthis.setSize(newWidth, this.height);\n\t}\n\n\tget height() {\n\t\treturn this.renderer.getSize().height;\n\t}\n\n\tset height(newHeight) {\n\t\tthis.setSize(this.width, newHeight);\n\t}\n}\n\nexport { SkinViewer };\n","import * as THREE from \"three\";\n\nclass OrbitControls extends THREE.EventDispatcher {\n\t/**\n\t * @preserve\n\t * The code was originally from https://github.com/mrdoob/three.js/blob/d45a042cf962e9b1aa9441810ba118647b48aacb/examples/js/controls/OrbitControls.js\n\t */\n\t/**\n\t * @license\n\t * Copyright (C) 2010-2017 three.js authors\n\t *\n\t * Permission is hereby granted, free of charge, to any person obtaining a copy\n\t * of this software and associated documentation files (the \"Software\"), to deal\n\t * in the Software without restriction, including without limitation the rights\n\t * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n\t * copies of the Software, and to permit persons to whom the Software is\n\t * furnished to do so, subject to the following conditions:\n\t *\n\t * The above copyright notice and this permission notice shall be included in\n\t * all copies or substantial portions of the Software.\n\t *\n\t * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n\t * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\t * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n\t * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n\t * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n\t * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n\t * THE SOFTWARE.\n\t *\n\t *\n\t * @author qiao / https://github.com/qiao\n\t * @author mrdoob / http://mrdoob.com\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author WestLangley / http://github.com/WestLangley\n\t * @author erich666 / http://erichaines.com\n\t */\n\n\t// This set of controls performs orbiting, dollying (zooming), and panning.\n\t// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n\t//\n\t//    Orbit - left mouse / touch: one finger move\n\t//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n\t//    Pan - right mouse, or arrow keys / touch: three finger swipe\n\n\tconstructor(object, domElement) {\n\t\tsuper();\n\t\tthis.object = object;\n\t\tthis.domElement = (domElement !== undefined) ? domElement : document;\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\tthis.target = new THREE.Vector3();\n\n\t\t// How far you can dolly in and out (PerspectiveCamera only)\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// How far you can zoom in and out (OrthographicCamera only)\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\t\tthis.minAzimuthAngle = -Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.25;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.keyPanSpeed = 7.0; // pixels moved per arrow key push\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t\t// Set to false to disable use of the keys\n\t\tthis.enableKeys = true;\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\n\t\t// for reset\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t//\n\t\t// public methods\n\t\t//\n\t\tthis.getPolarAngle = function () {\n\t\t\treturn spherical.phi;\n\t\t};\n\t\tthis.getAzimuthalAngle = function () {\n\t\t\treturn spherical.theta;\n\t\t};\n\t\tthis.saveState = function () {\n\t\t\tscope.target0.copy(scope.target);\n\t\t\tscope.position0.copy(scope.object.position);\n\t\t\tscope.zoom0 = scope.object.zoom;\n\t\t};\n\t\tthis.reset = function () {\n\t\t\tscope.target.copy(scope.target0);\n\t\t\tscope.object.position.copy(scope.position0);\n\t\t\tscope.object.zoom = scope.zoom0;\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent(changeEvent);\n\t\t\tscope.update();\n\t\t\tstate = STATE.NONE;\n\t\t};\n\n\t\t// this method is exposed, but perhaps it would be better if we can make it private...\n\t\tthis.update = function () {\n\t\t\tlet offset = new THREE.Vector3();\n\t\t\t// so camera.up is the orbit axis\n\t\t\tlet quat = new THREE.Quaternion().setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0));\n\t\t\tlet quatInverse = quat.clone().inverse();\n\t\t\tlet lastPosition = new THREE.Vector3();\n\t\t\tlet lastQuaternion = new THREE.Quaternion();\n\t\t\treturn function update() {\n\t\t\t\tlet position = scope.object.position;\n\t\t\t\toffset.copy(position).sub(scope.target);\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\toffset.applyQuaternion(quat);\n\t\t\t\t// angle from z-axis around y-axis\n\t\t\t\tspherical.setFromVector3(offset);\n\t\t\t\tif (scope.autoRotate && state === STATE.NONE) {\n\t\t\t\t\trotateLeft(getAutoRotationAngle());\n\t\t\t\t}\n\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\tspherical.phi += sphericalDelta.phi;\n\t\t\t\t// restrict theta to be between desired limits\n\t\t\t\tspherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta));\n\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\tspherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n\t\t\t\tspherical.makeSafe();\n\t\t\t\tspherical.radius *= scale;\n\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\tspherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\n\t\t\t\t// move target to panned location\n\t\t\t\tscope.target.add(panOffset);\n\t\t\t\toffset.setFromSpherical(spherical);\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\toffset.applyQuaternion(quatInverse);\n\t\t\t\tposition.copy(scope.target).add(offset);\n\t\t\t\tscope.object.lookAt(scope.target);\n\t\t\t\tif (scope.enableDamping === true) {\n\t\t\t\t\tsphericalDelta.theta *= (1 - scope.dampingFactor);\n\t\t\t\t\tsphericalDelta.phi *= (1 - scope.dampingFactor);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsphericalDelta.set(0, 0, 0);\n\t\t\t\t}\n\t\t\t\tscale = 1;\n\t\t\t\tpanOffset.set(0, 0, 0);\n\t\t\t\t// update condition is:\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\t\t\t\tif (zoomChanged ||\n\t\t\t\t\tlastPosition.distanceToSquared(scope.object.position) > EPS ||\n\t\t\t\t\t8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n\t\t\t\t\tscope.dispatchEvent(changeEvent);\n\t\t\t\t\tlastPosition.copy(scope.object.position);\n\t\t\t\t\tlastQuaternion.copy(scope.object.quaternion);\n\t\t\t\t\tzoomChanged = false;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}();\n\t\tthis.dispose = function () {\n\t\t\tscope.domElement.removeEventListener(\"contextmenu\", onContextMenu, false);\n\t\t\tscope.domElement.removeEventListener(\"mousedown\", onMouseDown, false);\n\t\t\tscope.domElement.removeEventListener(\"wheel\", onMouseWheel, false);\n\t\t\tscope.domElement.removeEventListener(\"touchstart\", onTouchStart, false);\n\t\t\tscope.domElement.removeEventListener(\"touchend\", onTouchEnd, false);\n\t\t\tscope.domElement.removeEventListener(\"touchmove\", onTouchMove, false);\n\t\t\tdocument.removeEventListener(\"mousemove\", onMouseMove, false);\n\t\t\tdocument.removeEventListener(\"mouseup\", onMouseUp, false);\n\t\t\twindow.removeEventListener(\"keydown\", onKeyDown, false);\n\t\t\t//scope.dispatchEvent({ type: \"dispose\" }); // should this be added here?\n\t\t};\n\t\t//\n\t\t// internals\n\t\t//\n\t\tlet scope = this;\n\t\tlet changeEvent = { type: \"change\" };\n\t\tlet startEvent = { type: \"start\" };\n\t\tlet endEvent = { type: \"end\" };\n\t\tlet STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\n\t\tlet state = STATE.NONE;\n\t\tlet EPS = 0.000001;\n\t\t// current position in spherical coordinates\n\t\tlet spherical = new THREE.Spherical();\n\t\tlet sphericalDelta = new THREE.Spherical();\n\t\tlet scale = 1;\n\t\tlet panOffset = new THREE.Vector3();\n\t\tlet zoomChanged = false;\n\t\tlet rotateStart = new THREE.Vector2();\n\t\tlet rotateEnd = new THREE.Vector2();\n\t\tlet rotateDelta = new THREE.Vector2();\n\t\tlet panStart = new THREE.Vector2();\n\t\tlet panEnd = new THREE.Vector2();\n\t\tlet panDelta = new THREE.Vector2();\n\t\tlet dollyStart = new THREE.Vector2();\n\t\tlet dollyEnd = new THREE.Vector2();\n\t\tlet dollyDelta = new THREE.Vector2();\n\t\tfunction getAutoRotationAngle() {\n\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\t\t}\n\t\tfunction getZoomScale() {\n\t\t\treturn Math.pow(0.95, scope.zoomSpeed);\n\t\t}\n\t\tfunction rotateLeft(angle) {\n\t\t\tsphericalDelta.theta -= angle;\n\t\t}\n\t\tfunction rotateUp(angle) {\n\t\t\tsphericalDelta.phi -= angle;\n\t\t}\n\t\tlet panLeft = function () {\n\t\t\tlet v = new THREE.Vector3();\n\t\t\treturn function panLeft(distance, objectMatrix) {\n\t\t\t\tv.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n\t\t\t\tv.multiplyScalar(-distance);\n\t\t\t\tpanOffset.add(v);\n\t\t\t};\n\t\t}();\n\t\tlet panUp = function () {\n\t\t\tlet v = new THREE.Vector3();\n\t\t\treturn function panUp(distance, objectMatrix) {\n\t\t\t\tv.setFromMatrixColumn(objectMatrix, 1); // get Y column of objectMatrix\n\t\t\t\tv.multiplyScalar(distance);\n\t\t\t\tpanOffset.add(v);\n\t\t\t};\n\t\t}();\n\t\t// deltaX and deltaY are in pixels; right and down are positive\n\t\tlet pan = function () {\n\t\t\tlet offset = new THREE.Vector3();\n\t\t\treturn function pan(deltaX, deltaY) {\n\t\t\t\tlet element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\t\t\t\tif (scope.object instanceof THREE.PerspectiveCamera) {\n\t\t\t\t\t// perspective\n\t\t\t\t\tlet position = scope.object.position;\n\t\t\t\t\toffset.copy(position).sub(scope.target);\n\t\t\t\t\tlet targetDistance = offset.length();\n\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\ttargetDistance *= Math.tan((scope.object.fov / 2) * Math.PI / 180.0);\n\t\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\n\t\t\t\t\tpanLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n\t\t\t\t\tpanUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n\t\t\t\t}\n\t\t\t\telse if (scope.object instanceof THREE.OrthographicCamera) {\n\t\t\t\t\t// orthographic\n\t\t\t\t\tpanLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n\t\t\t\t\tpanUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\t\tconsole.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.\");\n\t\t\t\t\tscope.enablePan = false;\n\t\t\t\t}\n\t\t\t};\n\t\t}();\n\t\tfunction dollyIn(dollyScale) {\n\t\t\tif (scope.object instanceof THREE.PerspectiveCamera) {\n\t\t\t\tscale /= dollyScale;\n\t\t\t}\n\t\t\telse if (scope.object instanceof THREE.OrthographicCamera) {\n\t\t\t\tscope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\");\n\t\t\t\tscope.enableZoom = false;\n\t\t\t}\n\t\t}\n\t\tfunction dollyOut(dollyScale) {\n\t\t\tif (scope.object instanceof THREE.PerspectiveCamera) {\n\t\t\t\tscale *= dollyScale;\n\t\t\t}\n\t\t\telse if (scope.object instanceof THREE.OrthographicCamera) {\n\t\t\t\tscope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\");\n\t\t\t\tscope.enableZoom = false;\n\t\t\t}\n\t\t}\n\t\t//\n\t\t// event callbacks - update the object state\n\t\t//\n\t\tfunction handleMouseDownRotate(event) {\n\t\t\trotateStart.set(event.clientX, event.clientY);\n\t\t}\n\t\tfunction handleMouseDownDolly(event) {\n\t\t\tdollyStart.set(event.clientX, event.clientY);\n\t\t}\n\t\tfunction handleMouseDownPan(event) {\n\t\t\tpanStart.set(event.clientX, event.clientY);\n\t\t}\n\t\tfunction handleMouseMoveRotate(event) {\n\t\t\trotateEnd.set(event.clientX, event.clientY);\n\t\t\trotateDelta.subVectors(rotateEnd, rotateStart);\n\t\t\tlet element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\trotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\trotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\t\t\trotateStart.copy(rotateEnd);\n\t\t\tscope.update();\n\t\t}\n\t\tfunction handleMouseMoveDolly(event) {\n\t\t\tdollyEnd.set(event.clientX, event.clientY);\n\t\t\tdollyDelta.subVectors(dollyEnd, dollyStart);\n\t\t\tif (dollyDelta.y > 0) {\n\t\t\t\tdollyIn(getZoomScale());\n\t\t\t}\n\t\t\telse if (dollyDelta.y < 0) {\n\t\t\t\tdollyOut(getZoomScale());\n\t\t\t}\n\t\t\tdollyStart.copy(dollyEnd);\n\t\t\tscope.update();\n\t\t}\n\t\tfunction handleMouseMovePan(event) {\n\t\t\tpanEnd.set(event.clientX, event.clientY);\n\t\t\tpanDelta.subVectors(panEnd, panStart);\n\t\t\tpan(panDelta.x, panDelta.y);\n\t\t\tpanStart.copy(panEnd);\n\t\t\tscope.update();\n\t\t}\n\t\tfunction handleMouseUp(event) {\n\t\t}\n\t\tfunction handleMouseWheel(event) {\n\t\t\tif (event.deltaY < 0) {\n\t\t\t\tdollyOut(getZoomScale());\n\t\t\t}\n\t\t\telse if (event.deltaY > 0) {\n\t\t\t\tdollyIn(getZoomScale());\n\t\t\t}\n\t\t\tscope.update();\n\t\t}\n\t\tfunction handleKeyDown(event) {\n\t\t\tswitch (event.keyCode) {\n\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\tpan(0, scope.keyPanSpeed);\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\tpan(0, -scope.keyPanSpeed);\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\tpan(scope.keyPanSpeed, 0);\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\tpan(-scope.keyPanSpeed, 0);\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tfunction handleTouchStartRotate(event) {\n\t\t\trotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t}\n\t\tfunction handleTouchStartDolly(event) {\n\t\t\tlet dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\tlet dy = event.touches[0].pageY - event.touches[1].pageY;\n\t\t\tlet distance = Math.sqrt(dx * dx + dy * dy);\n\t\t\tdollyStart.set(0, distance);\n\t\t}\n\t\tfunction handleTouchStartPan(event) {\n\t\t\tpanStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t}\n\t\tfunction handleTouchMoveRotate(event) {\n\t\t\trotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t\trotateDelta.subVectors(rotateEnd, rotateStart);\n\t\t\tlet element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\t\t\trotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\t\t\trotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\t\t\trotateStart.copy(rotateEnd);\n\t\t\tscope.update();\n\t\t}\n\t\tfunction handleTouchMoveDolly(event) {\n\t\t\tlet dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\tlet dy = event.touches[0].pageY - event.touches[1].pageY;\n\t\t\tlet distance = Math.sqrt(dx * dx + dy * dy);\n\t\t\tdollyEnd.set(0, distance);\n\t\t\tdollyDelta.subVectors(dollyEnd, dollyStart);\n\t\t\tif (dollyDelta.y > 0) {\n\t\t\t\tdollyOut(getZoomScale());\n\t\t\t}\n\t\t\telse if (dollyDelta.y < 0) {\n\t\t\t\tdollyIn(getZoomScale());\n\t\t\t}\n\t\t\tdollyStart.copy(dollyEnd);\n\t\t\tscope.update();\n\t\t}\n\t\tfunction handleTouchMovePan(event) {\n\t\t\tpanEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t\tpanDelta.subVectors(panEnd, panStart);\n\t\t\tpan(panDelta.x, panDelta.y);\n\t\t\tpanStart.copy(panEnd);\n\t\t\tscope.update();\n\t\t}\n\t\tfunction handleTouchEnd(event) {\n\t\t}\n\t\t//\n\t\t// event handlers - FSM: listen for events and reset state\n\t\t//\n\t\tfunction onMouseDown(event) {\n\t\t\tif (scope.enabled === false)\n\t\t\t\treturn;\n\t\t\tswitch (event.button) {\n\t\t\t\tcase scope.mouseButtons.ORBIT:\n\t\t\t\t\tif (scope.enableRotate === false)\n\t\t\t\t\t\treturn;\n\t\t\t\t\thandleMouseDownRotate(event);\n\t\t\t\t\tstate = STATE.ROTATE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase scope.mouseButtons.ZOOM:\n\t\t\t\t\tif (scope.enableZoom === false)\n\t\t\t\t\t\treturn;\n\t\t\t\t\thandleMouseDownDolly(event);\n\t\t\t\t\tstate = STATE.DOLLY;\n\t\t\t\t\tbreak;\n\t\t\t\tcase scope.mouseButtons.PAN:\n\t\t\t\t\tif (scope.enablePan === false)\n\t\t\t\t\t\treturn;\n\t\t\t\t\thandleMouseDownPan(event);\n\t\t\t\t\tstate = STATE.PAN;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t\tif (state !== STATE.NONE) {\n\t\t\t\tdocument.addEventListener(\"mousemove\", onMouseMove, false);\n\t\t\t\tdocument.addEventListener(\"mouseup\", onMouseUp, false);\n\t\t\t\tscope.dispatchEvent(startEvent);\n\t\t\t}\n\t\t}\n\t\tfunction onMouseMove(event) {\n\t\t\tif (scope.enabled === false)\n\t\t\t\treturn;\n\t\t\tswitch (state) {\n\t\t\t\tcase STATE.ROTATE:\n\t\t\t\t\tif (scope.enableRotate === false)\n\t\t\t\t\t\treturn;\n\t\t\t\t\thandleMouseMoveRotate(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase STATE.DOLLY:\n\t\t\t\t\tif (scope.enableZoom === false)\n\t\t\t\t\t\treturn;\n\t\t\t\t\thandleMouseMoveDolly(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase STATE.PAN:\n\t\t\t\t\tif (scope.enablePan === false)\n\t\t\t\t\t\treturn;\n\t\t\t\t\thandleMouseMovePan(event);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t}\n\t\tfunction onMouseUp(event) {\n\t\t\tif (scope.enabled === false)\n\t\t\t\treturn;\n\t\t\thandleMouseUp(event);\n\t\t\tdocument.removeEventListener(\"mousemove\", onMouseMove, false);\n\t\t\tdocument.removeEventListener(\"mouseup\", onMouseUp, false);\n\t\t\tscope.dispatchEvent(endEvent);\n\t\t\tstate = STATE.NONE;\n\t\t}\n\t\tfunction onMouseWheel(event) {\n\t\t\tif (scope.enabled === false || scope.enableZoom === false || (state !== STATE.NONE && state !== STATE.ROTATE))\n\t\t\t\treturn;\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\thandleMouseWheel(event);\n\t\t\tscope.dispatchEvent(startEvent); // not sure why these are here...\n\t\t\tscope.dispatchEvent(endEvent);\n\t\t}\n\t\tfunction onKeyDown(event) {\n\t\t\tif (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false)\n\t\t\t\treturn;\n\t\t\thandleKeyDown(event);\n\t\t}\n\t\tfunction onTouchStart(event) {\n\t\t\tif (scope.enabled === false)\n\t\t\t\treturn;\n\t\t\tswitch (event.touches.length) {\n\t\t\t\tcase 1:// one-fingered touch: rotate\n\t\t\t\t\tif (scope.enableRotate === false)\n\t\t\t\t\t\treturn;\n\t\t\t\t\thandleTouchStartRotate(event);\n\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:// two-fingered touch: dolly\n\t\t\t\t\tif (scope.enableZoom === false)\n\t\t\t\t\t\treturn;\n\t\t\t\t\thandleTouchStartDolly(event);\n\t\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:// three-fingered touch: pan\n\t\t\t\t\tif (scope.enablePan === false)\n\t\t\t\t\t\treturn;\n\t\t\t\t\thandleTouchStartPan(event);\n\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tstate = STATE.NONE;\n\t\t\t}\n\t\t\tif (state !== STATE.NONE) {\n\t\t\t\tscope.dispatchEvent(startEvent);\n\t\t\t}\n\t\t}\n\t\tfunction onTouchMove(event) {\n\t\t\tif (scope.enabled === false)\n\t\t\t\treturn;\n\t\t\tswitch (event.touches.length) {\n\t\t\t\tcase 1:// one-fingered touch: rotate\n\t\t\t\t\tif (scope.enableRotate === false)\n\t\t\t\t\t\treturn;\n\t\t\t\t\tif (state !== STATE.TOUCH_ROTATE)\n\t\t\t\t\t\treturn; // is this needed?...\n\t\t\t\t\thandleTouchMoveRotate(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:// two-fingered touch: dolly\n\t\t\t\t\tif (scope.enableZoom === false)\n\t\t\t\t\t\treturn;\n\t\t\t\t\tif (state !== STATE.TOUCH_DOLLY)\n\t\t\t\t\t\treturn; // is this needed?...\n\t\t\t\t\thandleTouchMoveDolly(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:// three-fingered touch: pan\n\t\t\t\t\tif (scope.enablePan === false)\n\t\t\t\t\t\treturn;\n\t\t\t\t\tif (state !== STATE.TOUCH_PAN)\n\t\t\t\t\t\treturn; // is this needed?...\n\t\t\t\t\thandleTouchMovePan(event);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tstate = STATE.NONE;\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t\tfunction onTouchEnd(event) {\n\t\t\tif (scope.enabled === false)\n\t\t\t\treturn;\n\t\t\thandleTouchEnd(event);\n\t\t\tscope.dispatchEvent(endEvent);\n\t\t\tstate = STATE.NONE;\n\t\t}\n\t\tfunction onContextMenu(event) {\n\t\t\tif (scope.enabled === false || scope.enablePan === false)\n\t\t\t\treturn;\n\t\t\tevent.preventDefault();\n\t\t}\n\t\t//\n\t\tscope.domElement.addEventListener(\"contextmenu\", onContextMenu, false);\n\t\tscope.domElement.addEventListener(\"mousedown\", onMouseDown, false);\n\t\tscope.domElement.addEventListener(\"wheel\", onMouseWheel, false);\n\t\tscope.domElement.addEventListener(\"touchstart\", onTouchStart, false);\n\t\tscope.domElement.addEventListener(\"touchend\", onTouchEnd, false);\n\t\tscope.domElement.addEventListener(\"touchmove\", onTouchMove, false);\n\t\twindow.addEventListener(\"keydown\", onKeyDown, false);\n\t\t// force an update at start\n\t\tthis.update();\n\t}\n}\n\nfunction createOrbitControls(skinViewer) {\n\tlet control = new OrbitControls(skinViewer.camera, skinViewer.renderer.domElement);\n\n\t// default configuration\n\tcontrol.enablePan = false;\n\tcontrol.target = new THREE.Vector3(0, -12, 0);\n\tcontrol.minDistance = 10;\n\tcontrol.maxDistance = 256;\n\tcontrol.update();\n\n\treturn control;\n}\n\nexport { OrbitControls, createOrbitControls };\n"],"names":["toFaceVertices","x1","y1","x2","y2","w","h","THREE","toSkinVertices","toCapeVertices","setVertices","box","top","bottom","left","front","right","back","faceVertexUvs","esp","SkinObject","layer1Material","layer2Material","modelListeners","head","headBox","headMesh","add","head2Box","head2Mesh","renderOrder","body","bodyBox","bodyMesh","body2Box","body2Mesh","position","y","rightArm","rightArmPivot","rightArmBox","rightArmMesh","push","scale","x","slim","z","uvsNeedUpdate","elementsNeedUpdate","rightArm2Box","rightArm2Mesh","leftArm","leftArmPivot","leftArmBox","leftArmMesh","leftArm2Box","leftArm2Mesh","rightLeg","rightLegPivot","rightLegBox","rightLegMesh","rightLeg2Box","rightLeg2Mesh","leftLeg","leftLegPivot","leftLegBox","leftLegMesh","leftLeg2Box","leftLeg2Mesh","_slim","value","forEach","listener","CapeObject","capeMaterial","capeBox","cape","PlayerObject","skin","visible","rotation","Math","PI","invokeAnimation","animation","player","time","CompositeAnimation","play","Function","AnimationHandle","paused","_paused","speed","_speed","_lastChange","_lastChangeX","dt","handles","Set","handle","remove","delete","WalkingAnimation","sin","basicArmRotationZ","cos","basicCapeRotationX","RunningAnimation","RotatingAnimation","copyImage","context","sX","sY","dX","dY","flipHorizontal","imgData","getImageData","index","index2","pA1","data","pA2","pA3","pA4","pB1","pB2","pB3","pB4","putImageData","hasTransparency","x0","y0","offset","computeSkinScale","width","fixOpaqueSkin","clearArea","clearRect","convertSkinTo1_8","copySkin","loadSkinToCanvas","canvas","image","isOldFormat","height","getContext","sideLength","drawImage","loadCapeToCanvas","isSlimSkin","canvasOrImage","HTMLCanvasElement","checkArea","HTMLImageElement","document","createElement","SkinViewer","options","domElement","detectModel","animationPaused","animationTime","disposed","skinImg","Image","skinCanvas","skinTexture","magFilter","minFilter","capeImg","capeCanvas","capeTexture","map","side","transparent","opacity","alphaTest","scene","camera","renderer","angleRot","alpha","antialias","setSize","getShaderInfoLog","appendChild","playerObject","crossOrigin","onerror","console","error","src","onload","needsUpdate","skinUrl","capeUrl","draw","requestAnimationFrame","render","aspect","updateProjectionMatrix","removeChild","dispose","url","getSize","newWidth","newHeight","OrbitControls","object","undefined","enabled","target","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","ZOOM","MIDDLE","PAN","target0","clone","position0","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","copy","scope","reset","dispatchEvent","changeEvent","update","STATE","NONE","quat","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","state","getAutoRotationAngle","sphericalDelta","max","min","makeSafe","radius","panOffset","setFromSpherical","lookAt","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","type","startEvent","endEvent","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","rotateLeft","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","multiplyScalar","panUp","pan","deltaX","deltaY","element","targetDistance","length","tan","fov","clientHeight","matrix","clientWidth","warn","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","event","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","handleMouseMoveDolly","handleMouseMovePan","handleMouseWheel","handleKeyDown","keyCode","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDolly","dx","dy","sqrt","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","button","preventDefault","addEventListener","handleMouseUp","stopPropagation","createOrbitControls","skinViewer","control"],"mappings":"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"}